<html><head></head><body color="#FFFFFF">

   <font face="arial,sans-serif" size="2" color="#000099">
   <b>
   URL: /cgi-bin/dcforum/dcboard.cgi<br>
   Forum: DCForumID1<br>
   Thread Number: 83<br>
   [ <a href="http://www.kalinin.ru/dcforum//DCForumID1/83.html">Go back to previous page</a> ]
   </b><hr>
   
<b><font size=2>Original Message<hr>"shmget"</font></b><br>
Posted by Михаил Эзау  on 11-May-02 at 01:44&nbsp;PM<br>
<blockquote>Джельтмены, а копал ли кто из Вас работу с shared memory в FreeBSD ? У меня такое чуство, что семейство функций shm* сделано "чисто для галочки":<P>1) Нет автоматического убивания приватных объектов после гибели процесса, использовавшего его. Из-за чего очень просто делается DoS любым юзером;<P>2) Если просканировать /usr/src на предмет утилит, использующих, скажем, функцию shmget - оказывается, сами фрюхозоиды отнють не рвуться использовать эту функцию.<P><BR>Люди, объясните мне, кто знает правду - shared memory действительно лучше не трогать, или я неправ и копать надо в другом направлении? <img src="/dcforum//Images/happy.gif"></blockquote><hr><b><font size=2>Table of contents</font></b><hr>
<ul>
<li><b>RE: shmget</b>,<b>Andrey L. Kalinin</b>, 10:37&nbsp;PM, 13-May-02
</ul>
<hr><b><font size=2>Messages in this discussion</font></b><hr>
<b>"RE: shmget"</b><br>
Posted by Andrey L. Kalinin  on 13-May-02 at 10:37&nbsp;PM<br>
<blockquote>
&gt;Джельтмены, а копал ли кто из <BR>&gt;Вас работу с shared memory <BR>&gt;в FreeBSD ? У меня <BR>&gt;такое чуство, что семейство функций <BR>&gt;shm* сделано "чисто для галочки": <P>Интересный вопрос. Честно --- я никогда об этом не  задумывался, потому что необходимость в использовании shared memory возникает крайне редко... я обычно обхожусь сокетами и каналами.<P>С другой стороны я никаких нареканий не помню, кроме чего-то "эдакого" в FreeBSD 4.1. Так что по слухам, работает нормально, но сам я в этом не уверен.<P>&gt;1) Нет автоматического убивания приватных объектов <BR>&gt;после гибели процесса, использовавшего его. <BR>&gt;Из-за чего очень просто делается <BR>&gt;DoS любым юзером; <P>Хм. Может быть я ошибаюсь, но shared memory в sysV вроде бы имеет "живучесть ядра"? Вне зависимости от IPC_PRIVATE. Во всяком случае, исключений в Стивенсе не упоминается, а он обычно очень педантично расписывает все возможные случаи.<P>Насколько я понимаю это общая проблема SysV-вызовов. С другой стороны, в структуре shmid_ds есть поле shm_nattach, по которой можно было бы отследить завершение использования памятью всеми процессами, но оно используется только для определения правомерности удаления объекта.<P>C другой стороны, опять же, если я правильно понимаю, то физически идентификатор, получаемый из shmget можно попросту переносить между процессами. Хотя, конечно, возможно что это побочный эффект реализации, хотя немного полазив по интернету я уже так не думаю. IPC_PRIVATE это же не флаг "приватности", это всего лишь уверенность в том, что всегда будет создан новый объект SysV IPC.<P>&gt;2) Если просканировать /usr/src на предмет <BR>&gt;утилит, использующих, скажем, функцию shmget <BR>&gt;- оказывается, сами фрюхозоиды отнють <BR>&gt;не рвуться использовать эту функцию. <P>Ну /usr/src это несколько не то место, в котором стоит ожидать использования IPC.<P>&gt;Люди, объясните мне, кто знает правду <BR>&gt;- shared memory действительно лучше <BR>&gt;не трогать, или я неправ <BR>&gt;и копать надо в другом <BR>&gt;направлении? <img src="/dcforum//Images/happy.gif"> <P>Опять же, насколько я знаю, shared memory в FreeBSD используется. <BR>
</blockquote>
<hr>
</font></body></html>
