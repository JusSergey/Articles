<html><head></head><body color="#FFFFFF">

   <font face="arial,sans-serif" size="2" color="#000099">
   <b>
   URL: /cgi-bin/dcforum/dcboard.cgi<br>
   Forum: DCForumID1<br>
   Thread Number: 123<br>
   [ <a href="http://www.kalinin.ru/dcforum//DCForumID1/123.html">Go back to previous page</a> ]
   </b><hr>
   
<b><font size=2>Original Message<hr>"std::ifstream::eof()"</font></b><br>
Posted by Lebedev A. V.  on 03-Sep-03 at 03:54&nbsp;PM<br>
<blockquote>Может мне кто-нибудь прокомментировать такую ситуацию:<BR>$ cat t.cxx<BR>#include &lt;fstream&gt;<BR>#include &lt;iostream&gt;<P>int main()<BR>{<BR>  std::ifstream f("ttt");<BR>  std::clog &lt;&lt; f.peek() &lt;&lt; std::endl;<BR>  std::clog &lt;&lt; std::boolalpha &lt;&lt; bool(f) &lt;&lt; std::endl;<BR>  std::clog &lt;&lt; std::boolalpha &lt;&lt; f.eof() &lt;&lt; std::endl;<BR>}<BR>$ g  -3.2 -pedantic -Wall t.cxx<BR>$ rm -f ttt<BR>$ touch ttt<BR>$ ./a.out<BR>-1<BR>true<BR>false<BR>--------------------------------<BR>Я имею ввиду почему eof() возвращает false, когда  файл пуст?<BR>Это действительно баг?</blockquote><hr><b><font size=2>Table of contents</font></b><hr>
<ul>
<li><b>RE: std::ifstream::eof()</b>,<b>Lebedev A. V.</b>, 06:32&nbsp;PM, 15-Sep-04
</ul>
<hr><b><font size=2>Messages in this discussion</font></b><hr>
<b>"RE: std::ifstream::eof()"</b><br>
Posted by Lebedev A. V.  on 15-Sep-04 at 06:32&nbsp;PM<br>
<blockquote>
Я тут сам недавно узнал, что это не баг (что неудивительно<img src="/dcforum//Images/wink.gif">).<BR>В стандарте написано, что eof() всего навсего возвращает воответствующий бит из структуры rdstate. А она меняется при операция чтения. А для органициии паскаль-подобного цикла (while not eof do read(ch); ...) нужно читать прямо в while, например: while (!std::cin.get(ch)) {...}.<BR>И ещё интересный факт: в Си   символьным типом хоть и является char (в отличии от Си, где int). В char_traits&lt;&gt; объявляется т. н. int_type, а также константа этого типа, означающая конец файла, которую можно получить посредством функции traits::eof(). В общем, всё сложнее чем может показаться на первый взгляд. Ужас!
</blockquote>
<hr>
</font></body></html>
